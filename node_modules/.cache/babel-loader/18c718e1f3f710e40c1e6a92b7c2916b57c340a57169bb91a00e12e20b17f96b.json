{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\somna\\\\OneDrive\\\\Documents\\\\Maths\\\\Rec\\\\Online_Voting2\\\\client\\\\src\\\\components\\\\screens\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport swal from 'sweetalert';\nimport { UserContext } from '../../App';\nimport Chart from './Chart';\nimport Profile from './Profile';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const [data, setData] = useState([]);\n  const {\n    state\n  } = useContext(UserContext);\n  useEffect(() => {\n    fetch('http://localhost:5000/allpost', {\n      headers: {\n        'Authorization': 'Bearer ' + localStorage.getItem('jwt')\n      }\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      setData(result.posts);\n    });\n  }, []);\n  const votePlayer = (id, userId) => {\n    swal({\n      title: 'Are you sure?',\n      text: 'Once selected, you will not be able to reselect the options!',\n      icon: 'warning',\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        fetch('http://localhost:5000/vote', {\n          method: 'put',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + localStorage.getItem('jwt')\n          },\n          body: JSON.stringify({\n            postId: id,\n            userId\n          })\n        }).then(res => res.json()).then(result => {\n          const newData = data.map(item => {\n            if (item._id === result._id) {\n              return result;\n            } else {\n              return item;\n            }\n          });\n          setData(newData);\n        }).catch(err => {\n          console.log(err);\n        });\n        swal('You successfully have given your vote!', {\n          icon: 'success'\n        });\n      } else {\n        swal('Again, select your option!');\n      }\n    });\n  };\n  const userId = JSON.parse(localStorage.getItem('user')) ? JSON.parse(localStorage.getItem('user'))._id : null;\n  const userIdExist = data.map(item => item.votes.filter(item => item));\n  let isAdmin = false;\n  if (JSON.parse(localStorage.getItem('user')) !== null) {\n    isAdmin = JSON.parse(localStorage.getItem('user')).userType === 0;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-8\",\n      style: {\n        margin: 'auto',\n        paddingTop: '5%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-3\",\n        style: {\n          float: 'left',\n          border: '1px solid green'\n        },\n        children: /*#__PURE__*/_jsxDEV(Profile, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8\",\n        style: {\n          float: 'right',\n          backgroundColor: 'white',\n          padding: '10px'\n        },\n        children: data.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '10px',\n            backgroundColor: '#f2f4f6',\n            height: '100px',\n            borderRadius: '15px',\n            padding: '25px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'space-between'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: item.title.split(' ')[0]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.photo,\n              alt: \"Description\",\n              style: {\n                height: '70px',\n                width: '70px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-content\",\n              children: [!item.votes.includes(state._id) && !isAdmin ? /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: () => votePlayer(item._id, userId),\n                children: \"Vote\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 21\n              }, this) : '', isAdmin ? /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn disabled\",\n                style: {\n                  marginLeft: '47px',\n                  background: 'blue'\n                },\n                children: \"Admin - No Vote\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 21\n              }, this) : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this)\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"xO0QyqEmRoNIgtyLTfLOlvIlBnI=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","useContext","swal","UserContext","Chart","Profile","jsxDEV","_jsxDEV","Home","_s","data","setData","state","fetch","headers","localStorage","getItem","then","res","json","result","console","log","posts","votePlayer","id","userId","title","text","icon","buttons","dangerMode","willDelete","method","body","JSON","stringify","postId","newData","map","item","_id","catch","err","parse","userIdExist","votes","filter","isAdmin","userType","children","className","style","margin","paddingTop","float","border","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","padding","index","marginBottom","height","borderRadius","display","flexDirection","justifyContent","split","src","photo","alt","width","includes","onClick","marginLeft","background","_c","$RefreshReg$"],"sources":["C:/Users/somna/OneDrive/Documents/Maths/Rec/Online_Voting2/client/src/components/screens/Home.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport swal from 'sweetalert';\r\nimport { UserContext } from '../../App';\r\nimport Chart from './Chart';\r\nimport Profile from './Profile';\r\n\r\nconst Home = () => {\r\n  const [data, setData] = useState([]);\r\n  const { state } = useContext(UserContext);\r\n\r\n  useEffect(() => {\r\n    fetch('http://localhost:5000/allpost', {\r\n      headers: {\r\n        'Authorization': 'Bearer ' + localStorage.getItem('jwt'),\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        console.log(result);\r\n        setData(result.posts);\r\n      });\r\n  }, []);\r\n\r\n  const votePlayer = (id, userId) => {\r\n    swal({\r\n      title: 'Are you sure?',\r\n      text: 'Once selected, you will not be able to reselect the options!',\r\n      icon: 'warning',\r\n      buttons: true,\r\n      dangerMode: true,\r\n    }).then((willDelete) => {\r\n      if (willDelete) {\r\n        fetch('http://localhost:5000/vote', {\r\n          method: 'put',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer ' + localStorage.getItem('jwt'),\r\n          },\r\n          body: JSON.stringify({\r\n            postId: id,\r\n            userId,\r\n          }),\r\n        })\r\n          .then((res) => res.json())\r\n          .then((result) => {\r\n            const newData = data.map((item) => {\r\n              if (item._id === result._id) {\r\n                return result;\r\n              } else {\r\n                return item;\r\n              }\r\n            });\r\n            setData(newData);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n        swal('You successfully have given your vote!', {\r\n          icon: 'success',\r\n        });\r\n      } else {\r\n        swal('Again, select your option!');\r\n      }\r\n    });\r\n  };\r\n\r\n  const userId = JSON.parse(localStorage.getItem('user'))\r\n    ? JSON.parse(localStorage.getItem('user'))._id\r\n    : null;\r\n\r\n  const userIdExist = data.map((item) => item.votes.filter((item) => item));\r\n\r\n  let isAdmin = false;\r\n  if (JSON.parse(localStorage.getItem('user')) !== null) {\r\n    isAdmin = JSON.parse(localStorage.getItem('user')).userType === 0;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"col-md-8\" style={{ margin: 'auto', paddingTop: '5%' }}>\r\n        <div className=\"col-md-3\" style={{ float: 'left', border: '1px solid green' }}>\r\n          <Profile />\r\n        </div>\r\n        <div className=\"col-md-8\" style={{ float: 'right', backgroundColor: 'white', padding: '10px' }}>\r\n          {data.map((item, index) => (\r\n            <div\r\n              key={item._id}\r\n              style={{\r\n                marginBottom: '10px',\r\n                backgroundColor: '#f2f4f6',\r\n                height: '100px',\r\n                borderRadius: '15px',\r\n                padding: '25px',\r\n              }}\r\n            >\r\n              <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between' }}>\r\n                <h6>\r\n                  <b>{index + 1}</b>\r\n                </h6>\r\n                <h6>\r\n                  <b>{item.title.split(' ')[0]}</b>\r\n                </h6>\r\n                <img src={item.photo} alt=\"Description\" style={{ height: '70px', width: '70px' }} />\r\n                <div className=\"card-content\">\r\n                  {!item.votes.includes(state._id) && !isAdmin ? (\r\n                    <button className=\"btn btn-success\" onClick={() => votePlayer(item._id, userId)}>\r\n                      Vote\r\n                    </button>\r\n                  ) : (\r\n                    ''\r\n                  )}\r\n                  {isAdmin ? (\r\n                    <button className=\"btn disabled\" style={{ marginLeft: '47px', background: 'blue' }}>\r\n                      Admin - No Vote\r\n                    </button>\r\n                  ) : (\r\n                    ''\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}